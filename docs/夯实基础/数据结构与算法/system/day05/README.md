# day04

## 归并
### 给定一个数组arr，两个正数lower和upper，返回arr中有多少个子数组的累加和在 [lower,upper] 范围上
https://leetcode.cn/problems/count-of-range-sum/
> 前置知识    
> 前缀和数组：
> arr = [1,4,7,9,3,5]    
> 生成前缀和数组：0位置就是本身，后面的都使用前面的前缀和+自身   
> preSum[1,5,12,21,24,29]    
> 如何使用前缀和？想得到L～R上的累加和，就可以preSum[R]-preSum[L]   
> 
> 暴力解法：   
> arr：[1,-1,-2,3]  lower:-1  upper:1   
> 遍历所有的子数组,求累加和是否在[lower,upper]区间内        
> 0-0 0-1 0-2 0-3    
> 1-1 1-2 1-3   
> 2-2 2-3    
> 3-3   
> 
> 利用归并思想解题    
> 前置思路：   
> 0-0   
> 0-1 1-1   
> 0-2 1-2 2-2   
> 0-3 1-3 2-3 3-3   
> 求出每个以i结尾的子数组有多少个达标（i从0～N-1），然后加起来，就得出来最终结果    
> sum(i..j)=sum(0..j)-sum(0..i)   
> 假设以17为例，sum(0..17)=100,[lower,upper]为[10,40]    
> [x-upper,x-lower]=[60,90]   
> 假设sum(0..2)是70，在这个范围内，一定可以知道sum(2..17)在[10,40]这个范围上   
> 
> 假设 0～i 整体的累加和是X，题目的目标是[lower,upper]   
> 求必须以 i 位置结尾的子数组，有多少个在[lower,upper]范围上    
> 等同于 去求 i 之前的所有前缀和中，有多少个前缀和在[x-upper,x-lower]范围上   
